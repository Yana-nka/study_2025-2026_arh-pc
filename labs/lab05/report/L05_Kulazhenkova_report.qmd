---
## Author
author:
  name: Кулаженкова Яна Сергеевна
  degrees: DSc
  orcid: 0000-0002-0877-7063
  email: kulyabov-ds@rudn.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6

## Title
title: "Отчёт по лабораторной работе №5"
subtitle: "Группа: НКАбд-03-25, студ. билет: 1032253497"
license: "CC BY"
---

# Цель работы

Основной целью данной лабораторной работы является приобретение практических навыков работы в файловом менеджере Midnight Commander и освоение инструкций языка ассемблера mov и int. Работа направлена на понимание основ системного программирования в операционной системе Linux.

# Теоретическое введение

Midnight Commander представляет собой консольный файловый менеджер, который предоставляет удобный интерфейс для работы с файловой системой. Этот инструмент характеризуется двухпанельным интерфейсом и системой функциональных клавиш, что значительно упрощает навигацию и выполнение операций с файлами.

Программа на языке ассемблера NASM имеет четкую структуру, состоящую из трех основных секций. Секция .data предназначена для хранения инициализированных данных, секция .bss содержит неинициализированные данные, а секция .text включает непосредственно исполняемый код программы.

Системные вызовы обеспечивают критически важный механизм взаимодействия прикладных программ с ядром операционной системы. Основными системными вызовами, изученными в работе, являются write для вывода данных, read для ввода данных и exit для корректного завершения программы. Вызов этих функций осуществляется через инструкцию int 0x80, при этом параметры передаются через регистры процессора.

# Выполнение лабораторной работы
## Начало выполнения работы

Работа выполнялась на персональном компьютере с использованием операционной системы Ubuntu 24.04.3.

Начнем выполнение лабораторной работы с создания рабочего каталога lab05 с помощью функциональной клавиши F7 в Midnight Commander. Каталог создан в директории ~/work/arch-pc для организации файлов лабораторной работы ([рис. @fig-001]) и ([рис. @fig-002]).

![Начало работы](image/1.png){#fig-001 width=80%}

![Начало работы](image/2.png){#fig-002 width=80%}

После этого изменим файл lab5-1.asm с помощью встроенного редактора Midnight Commander. Виден код программы, содержащий секции данных и кода, а также системные вызовы для ввода и вывода информации ([рис. @fig-003]).

![Содержимое файла lab5-1.asm](image/3.png){#fig-003 width=80%}

Теперь приступим к запуску программы. Выполним процесс трансляции программы lab5-1.asm в объектный файл с помощью компилятора nasm и последующей компоновки в исполняемый файл. Продемонстрируем результат выполнения программы, где видно приглашение для ввода строки и ожидание пользовательского ввода ([рис. @fig-004]).

![Запуск программы](image/4.png){#fig-004 width=80%}

## Подключение внешнего файла

Скопируем файл in_out.asm в рабочий каталог lab05 с использованием функциональной клавиши F5. Это необходимо для обеспечения доступа к подпрограммам из основной программы ([рис. @fig-005]).

![Создание копии](image/5.png){#fig-005 width=80%}

Теперь перейдем к редактированию файла lab5-2.asm, в котором используется подключение внешнего файла in_out.asm через директиву %include. Обратим внимание на использование подпрограмм sprintLF, sread и quit для упрощения кода программы ([рис. @fig-006]) и ([рис. @fig-007]).

![Редактирование файла](image/7.png){#fig-006 width=80%}

![Редактирование файла](image/9.png){#fig-007 width=80%}

Проверим работу модифицированной программы. Код успешно работает, используя подпрограммы из внешнего файла, что демонстрирует преимущества модульного подхода в программировании ([рис. @fig-008]) и ([рис. @fig-009]).

![Выполнение программы](image/8.png){#fig-008 width=80%}

![Выполнение программы](image/10.png){#fig-009 width=80%}

Все этапы лабораторной работы были выполнены последовательно, программы успешно компилируются и выполняются, подтверждая корректность изученного материала и приобретенных практических навыков работы с Midnight Commander и языком ассемблера NASM.

# Задания для самостоятельной работы

Для начала создадим копию файла lab5-1.asm с именем lab5-1-1.asm с использованием функциональной клавиши F6 в Midnight Commander.

Продемонстрируем процесс редактирования файла lab5-1-1.asm, в который добавлен дополнительный системный вызов write для вывода на экран введенной пользователем строки. Заметим, что после чтения строки с клавиатуры программа выводит ее обратно на экран, используя тот же буфер buf1 ([рис. @fig-010]).

![Редактирование файла](image/11.png){#fig-010 width=80%}

Проверим правильность выполнения компиляции модифицированной программы lab5-1-1.asm. Программа успешно выводит приглашение "Введите строку:", принимает ввод пользователя и затем отображает введенную строку на экране, что подтверждает корректность работы алгоритма ([рис. @fig-011]).

![Выполнение программы](image/12.png){#fig-011 width=80%}

Теперь создадим копию файла lab5-2.asm под именем lab5-2-1.asm. Эта копия будет использоваться для реализации того же алгоритма, но с применением подпрограмм из внешнего файла in_out.asm ([рис. @fig-012]).

![Редактирование файла](image/13.png){#fig-012 width=80%}

Продемонстрируем код модифицированной программы lab5-2-1.asm, в который добавлен вызов подпрограммы sprint для вывода на экран введенной пользователем строки. После чтения строки с помощью sread программа использует sprint для отображения содержимого буфера на экране.

Проверим выполнение программы lab5-2-1.asm ([рис. @fig-013]).

![Выполнение программы](image/14.png){#fig-013 width=80%}

# Выводы

В результате выполнения лабораторной работы и заданий для самостоятельной работы были успешно достигнуты все поставленные цели, связанные с приобретением практических навыков работы в Midnight Commander и освоением инструкций языка ассемблера mov и int.

Работа в файловом менеджере Midnight Commander позволила эффективно организовать рабочее пространство для разработки программ на языке ассемблера. Освоение функциональных клавиш и основных операций управления файлами значительно ускорило процесс создания и редактирования исходных кодов, что подтвердило практическую ценность данного инструмента для системного программирования.
