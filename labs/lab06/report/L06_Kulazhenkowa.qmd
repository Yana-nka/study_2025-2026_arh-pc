---
## Author
author:
  name: Кулаженкова Яна Сергеевна
  degrees: DSc
  orcid: 0000-0002-0877-7063
  email: 1032253497@pfur.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6

## Title
title: "Отчёт по лабораторной работе №6"
subtitle: "НКАбд-03-25"
license: "CC BY"
---

# Цель работы

Цель работа - освоение арифметических инструкций языка ассемблера NASM.

# Задание

1. Изучить инфинформацию об арифметических операциях в NASM
2. Выполнить лабораторную работу с использованием изученной информации
3. Выполнить задания для самостоятельной работы.

# Теоретическое введение

В языке ассемблера NASM существуют три основных способа адресации операндов.
1. Регистровая адресация - операнды находятся в регистрах процессора (пример: mov ax, bx)
2. Непосредственная адресация - значение операнда задается непосредственно в команде (пример: mov ax, 2)
3. Адресация памяти - операнд указывает на адрес в памяти (пример: mov eax, [intg])

Команда mov eax, [intg] загружает значение из памяти, а mov eax, intg загружает адрес переменной.

В [табл. @tbl] приведены основные арифметические команды в NASM.

| Арифметическая операция | Команда |
|-|-|
| Сложение | add \<операнд1\>, \<операнд2\> |
| Вычитание  | sub \<операнд1\>, \<операнд2\> |
| Инкремент/декремент  | inc \<операнд\>, dec \<операнд\> |
| Изменение знака  | neg \<операнд\> |
| Умножение  | mul (беззнаковое), imul (знаковое) |
| Деление  | div (беззнаковое), idiv (знаковое) |

: Основные арифметические команды NASM {#tbl}

Операции умножения и деления имеют особенности: один операнд задается явно, второй находится в регистрах AL/AX/EAX, а результат помещается в определенные пары регистров в зависимости от размера операндов.

Ввод и вывод данных осуществляются в символьном виде с использованием кодировки ASCII. Для корректной работы с числами необходимо преобразование между символьным и числовым представлением с помощью специализированных функций.

# Выполнение лабораторной работы
## Символьные и численные данные в NASM

Создадим каталог для программ лабораторной работы № 6. Внутри него создадим файл lab6-1.asm ([рис. @fig-001]).

![Начало работы с файлом](image/1.png){#fig-001 width=80%}

Рассмотрим примеры программ вывода символьных и численных значений. Для этого введем в наш файл следующий текст программы ([рис. @fig-002]).

![Подготовка файла](image/2.png){#fig-002 width=80%}

После создадим исполняемый файл и запустим его ([рис. @fig-003]).

![Исполняемый файл](image/3.png){#fig-003 width=80%}

Далее изменим текст программы и вместо символов, запишем в регистры числа ([рис. @fig-004]).

![Изменим код](image/4.png){#fig-004 width=80%}

Снова создадим исполняемый файл. Проверим работу файла ([рис. @fig-005]).

![Запуск файла](image/5.png){#fig-005 width=80%}

Теперь преобразуем текст программы так, чтобы были использованы другие функции. Для этого создадим файл lab6-2.asm в каталоге ~/work/arch-pc/lab06 и введем в него новый текст программы ([рис. @fig-006]).

![Второй файл](image/7.png){#fig-006 width=80%}

Продемонстрируем работу файла. Создадим исполняемый файл и запустим его ([рис. @fig-007]).

![Запуск второго файла](image/8.png){#fig-007 width=80%}

Аналогично предыдущему примеру заменим символы на числа ([рис. @fig-009]).

![Новый код программы](image/9.png){#fig-009 width=80%}

Создадим исполняемый файл и запустим его ([рис. @fig-010]).

![Запуск файла](image/10.png){#fig-010 width=80%}

Теперь заменим функцию iprintLF на print ([рис. @fig-011]).

![Новый код](image/11.png){#fig-011 width=80%}

Создадим исполняемый файл и запустим его ([рис. @fig-012]).

![Работа файла](image/12.png){#fig-012 width=80%}

## Выполнение арифметических операций в NASM

Напишем программу для вычисления значения арифметического выражения. Для этого создадим файл lab6-3.asm. Запишем нужный код программы ([рис. @fig-013]).

![Код программы](image/14.png){#fig-013 width=80%}

Создадим исполняемый файл и проверим результат работы программы ([рис. @fig-014]).

![Выполнение программы](image/15.png){#fig-014 width=80%}

Далее найдём значение другого выражения. Для этого изменим текст программы. Проверим работу программы ([рис. @fig-015]).

![Исполнение файла](image/16.png){#fig-015 width=80%}

В качестве другого примера рассмотрим программу вычисления варианта задания по номеру студенческого билета. Для написания кода создадим файл variant.asm. Введем в файл variant.asm следующую программу ([рис. @fig-017]).

![Редактирование файла](image/17.png){#fig-016 width=80%}

После этого проверим работу программы ([рис. @fig-017]).

![Выполнение файла](image/18.png){#fig-017 width=80%}

## Вопросы лабораторной работы

1. Какие строки листинга 6.4 отвечают за вывод на экран сообщения 'Ваш вариант:'?

**Ответ:** Строки, отвечающие за вывод сообщения 'Ваш вариант:'
```
   mov eax,rem
   call sprint
```

2. Для чего используется следующие инструкции?
```
mov
ecx, x
mov
edx, 80
call sread
```

**Ответ:** данные инструкции используются для помещения адреса переменной x в регистр ecx, указания максимальной длины ввода (80 символов) и вызова подпрограммы чтения строки с клавиатуры

3. Для чего используется инструкция 'call atoi'?

**Ответ:** функция atoi преобразует ascii-код символа в целое число и записывает результат в регистр eax.

4. Какие строки листинга 6.4 отвечают за вычисления варианта?

**Ответ:** строки, отвечающие за вычисления варианта.
```
   xor edx,edx
   mov ebx,20
   div ebx
   inc edx
```
5. В какой регистр записывается остаток от деления при выполнении инструкции 'div ebx'?

**Ответ:** остаток от деления записывается в регистр EDX.

6. Для чего используется инструкция 'inc edx'?

**Ответ:** инструкция "inc edx" используется для увеличения на 1 остатка от деления (номера варианта), поскольку варианты нумеруются с 1, а не с 0.

7. Какие строки листинга 6.4 отвечают за вывод на экран результата вычислений?

**Ответ:** строки, отвечающие за вывод результата вычислений.

```
   mov eax,edx
   call iprintLF
```
# Задание для самостоятельной работы

Напишем программу для вычисления значения функции. Затем проверим работу программы для различных функций и входных данных ([рис. @fig-018]).

![Самостоятельная работа](image/19.png){#fig-018 width=80%}

# Выводы

В результате выполнения лабораторной работы была достигнута основная цель - освоение арифметических инструкций языка ассемблера NASM. На практике были успешно применены команды сложения (add), вычитания (sub), умножения (mul/imul) и деления (div/idiv), а также изучены особенности работы с операндами в регистрах и памяти. Особое внимание было уделено правилам использования регистров при операциях умножения и деления, где результат занимает фиксированные пары регистров в зависимости от размера операндов.

Важным результатом работы стало освоение методики преобразования данных между символьным и числовым представлением с использованием подпрограмм iprint, iprintLF и atoi. Практическое применение этих функций позволило организовать корректный ввод-вывод данных и выполнение арифметических операций над числами, введенными пользователем. Полученные навыки программирования на языке ассемблера NASM являются фундаментальными для дальнейшего изучения архитектуры ЭВМ и низкоуровневого программирования.
